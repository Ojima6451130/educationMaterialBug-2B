<!-- monthlyShiftInput.html -->
<!-- /**
 * ファイル名：monthlyShiftInput.html
 *
 * 変更履歴
 * 1.0  2010/09/13 Kazuya.Naraki
 * 2.0  2024/05/15 Sho.Kiyota
 */ -->

<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="Thu, 01 Dec 1994 16:00:00 GMT">
  <title>月別シフト入力画面</title>
  <link rel="stylesheet" media="all" th:href="@{/css/common.css}" />
  <script type="text/javascript" th:src="@{/js/common.js}"></script>
  <script type="text/javascript" th:src="@{/js/message.js}"></script>
  <style>
    .weekday {
      color: black;
    }

    .saturday {
      color: blue;
    }

    .sunday {
      color: red;
    }
  </style>
</head>

<body>
  <div id="wrapper">
    <div id="header">
      <table class="full-width">
        <tr height="22px">
          <td id="headLeft">
            <form action="/kikin/menu" method="post">
              <input value="戻る" type="submit" class="smallButton" />
            </form>
          </td>
          <td id="headCenter">
            月別シフト入力
          </td>
          <td id="headRight">
            <input value="ログアウト" type="button" class="smallButton" onclick="logout()" />
          </td>
        </tr>
      </table>
    </div>

    <div id="businessBody" style="overflow-x: hidden;" >
      <form action="/kikin/monthlyShiftInput/search" method="post" th:object="${monthlyShiftInputForm}">
        <div id="resize" class="full-width" style="margin-left:9%;">
          <div style="float: left; width: 804px; text-align: left; margin-left:13%;">
            <label>表示年月：</label>
            <select th:name="yearMonth" id="yearMonth" style="color: black;">
              <option th:each="yearMonth : ${yearMonthValues}" th:value="${yearMonth}"
                th:selected="${yearMonth} == *{yearMonth}" th:inline="text">[[${yearMonth}]]</option>
            </select>
            <button type="submit" value="search">検索</button>

            <!-- パスをcontrollerのメソッドに変える -->
            <!-- <a th:href="@{/kikin/monthlyShiftInput/monthlyShiftInputPage(paging='back', yearMonth=${monthlyShiftInputForm.yearMonth},offset=${monthlyShiftInputForm.offset},countPage=${monthlyShiftInputForm.countPage})}">前へ</a>
            <a th:href="@{/kikin/monthlyShiftInput/monthlyShiftInputPage(paging='next', yearMonth=${monthlyShiftInputForm.yearMonth},offset=${monthlyShiftInputForm.offset},countPage=${monthlyShiftInputForm.countPage},maxPage=${monthlyShiftInputForm.maxPage})}">次へ</a>
            <span th:text="${monthlyShiftInputForm.countPage}"></span>/
            <span th:text="${monthlyShiftInputForm.maxPage}"></span> -->
            <table class="widthTable">
              <tr height="22px">
                <td width="150px" valign="top">
                  <table class="tableHeader">
                    <tr height="22px">
                      <td style="width: 150px; text-align: center;">
                        &nbsp;
                      </td>
                    </tr>
                    <tr height="22px">
                      <td style="width: 150px; text-align: center;">
                        社員名
                      </td>
                    </tr>
                    <tr th:each="shift : ${monthlyShiftInputForm.monthlyShiftInputBeanList}" class="tableBody">
                      <td style="width: 150px; text-align: center;">
                        <span th:text="${shift.employeeName}"></span><br>
                      </td>
                    </tr>
                  </table>
                </td>

                <td valign="top">
                  <div style="overflow-x: scroll;overflow-y: hidden; width: 985px; height: auto; text-align:center;">
                    <table class="tableHeader">
                      <tr height="22px">
                        <!-- 日付を横に並べる -->
                        <td th:each="dateBean : ${monthlyShiftInputForm.dateBeanList}"
                          style="width: 40px; text-align: center;" th:text="${dateBeanStat.count}"></td>
                      </tr>
                      <tr height="22px">
                        <!-- 曜日を横に並べる -->
                        <td th:each="dateBean : ${monthlyShiftInputForm.dateBeanList}"
                          style="width: 40px; text-align: center;" th:text="${dateBean.weekDay}"
                          th:class="${dateBean.weekDay.equals('土') ? 'fontBlue' : (dateBean.weekDay.equals('日') or dateBean.publicHolidayFlg) ? 'fontRed' : 'fontBlack'}">
                        </td>
                      </tr>
                      <tr th:each="monthlyShiftInputBean, beanStat : *{monthlyShiftInputBeanList}" height="25vw">

                        <td th:each="i : ${#numbers.sequence(1, dateBeanList.size())}">

                          <select
                            th:field="*{monthlyShiftInputBeanList[__${beanStat.index}__].shiftId__${i < 10 ? '0' + i : i}__}">
                            <option th:each="entry : ${monthlyShiftInputForm.shiftCmbMap}" th:value="${entry.key}"
                              th:text="${entry.value}">
                            </option>
                          </select>

                        </td>
                        <input type="hidden"
                          th:field="*{monthlyShiftInputBeanList[__${beanStat.index}__].employeeId}" />
                        <input type="hidden" th:field="*{monthlyShiftInputBeanList[__${beanStat.index}__].registerFlg}"/>
                        <input type="hidden" th:field="*{monthlyShiftInputBeanList[__${beanStat.index}__].employeeName}"/>
                      </tr>
                    </table>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>

    </div>
    <div id="footer">
      <table>
        <tr>
          <td id="footLeft">
            <div style="margin-left:50px;white-space: nowrap;">
              <input value="凡例表示" type="button" class="longButton" onclick="openWindow()" />
              <input value="基本シフト反映" type="submit" class="longButton" formaction="/kikin/monthlyShiftInput/submitImportKihon" />
              <input value="出勤希望日反映" type="submit" class="longButton" formaction="/kikin/monthlyShiftInput/dateRequest" />
            </div>
          </td>
          <td id="footCenter" style="text-align: right;">
          </td>
          <td id="footRight">
            <input value="登録" type="submit" class="smallButton" formaction="/kikin/monthlyShiftInput/regist" />
          </td>
        </tr>
      </table>
    </div>
  </div>
  </form>
  <script>
    function openWindow() {
      // 新しいウィンドウを開く
      window.open("/kikin/ShiftPattern", "windowBPopup", "menubar=no, toolbar=no, scrollbars=auto, resizable=yes, width=520px, height=650px");

    }

  </script>
</body>

</html>